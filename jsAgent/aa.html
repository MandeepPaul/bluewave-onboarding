<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tooltip Example</title>
    <style>
        .tooltip-target {
            
            padding: 10px;
            border: 1px solid #ccc;
            display: inline-block;
            cursor: pointer;
        }

        .tooltip-target:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>

<body style="height: 2000px;">
    <h1>Tooltip Example</h1>
    <p>Hover over the elements below to see the tooltip in different positions:</p>

    <!-- Elements with tooltips -->
    <div class="tooltip-target" data-tooltip-position="top">Element 1 (Top)</div>
    <div class="tooltip-target" data-tooltip-position="bottom">Element 2 (Bottom)</div>
    <div class="tooltip-target" data-tooltip-position="left">Element 3 (Left)</div>
    <div class="tooltip-target" data-tooltip-position="right">Element 4 (Right)</div>

    <script>
        // Tooltip function
        function createTooltip(selector) {
            // Create the tooltip element
            const tooltip = document.createElement('div');
            tooltip.timer = null;
            tooltip.positionTimer = null;
            tooltip.style.position = 'absolute';
            tooltip.style.backgroundColor = '#333';
            tooltip.style.color = '#fff';
            tooltip.style.padding = '5px 10px';
            tooltip.style.borderRadius = '4px';
            tooltip.style.fontSize = '14px';
            //tooltip.style.display = 'block';
            tooltip.style.visibility = 'hidden';
            tooltip.style.zIndex = '99999';
            tooltip.innerHTML = `<span>Tooltip</span>`;
            document.body.appendChild(tooltip);

            tooltip.addEventListener('mouseenter', function (e) {
                clearInterval(tooltip.timer);
                e.target.style.visibility = 'visible';
            });

            tooltip.addEventListener('mouseleave', function (e) {
                tooltip.timer = setTimeout(() => {
                    e.target.style.visibility = 'hidden';
                }, 1500);
            });

            
            const elements = document.querySelectorAll(selector);            
            elements.forEach(function (element) {

                element.addEventListener('mouseenter', function (e) {
                    clearTimeout(tooltip.timer);
                    clearTimeout(tooltip.positionTimer);

                    tooltip.positionTimer = setTimeout(() => {
                       
                        const position = e.target.getAttribute('data-tooltip-position') || 'top';

                        const rect = e.target.getBoundingClientRect();
                        switch (position) {
                            case 'top':
                                tooltip.style.left = `${rect.left + window.scrollX + rect.width / 2}px`;
                                tooltip.style.top = `${rect.top + window.scrollY - tooltip.offsetHeight - 5}px`;
                                tooltip.style.transform = 'translateX(-50%)';
                                break;
                            case 'bottom':
                                tooltip.style.left = `${rect.left + window.scrollX + rect.width / 2}px`;
                                tooltip.style.top = `${rect.bottom + window.scrollY + 5}px`;
                                tooltip.style.transform = 'translateX(-50%)';
                                break;
                            case 'left':
                                tooltip.style.left = `${rect.left + window.scrollX - tooltip.offsetWidth - 5}px`;
                                tooltip.style.top = `${rect.top + window.scrollY + rect.height / 2}px`;
                                tooltip.style.transform = 'translateY(-50%)';
                                break;
                            case 'right':
                                tooltip.style.left = `${rect.right + window.scrollX + 5}px`;
                                tooltip.style.top = `${rect.top + window.scrollY + rect.height / 2}px`;
                                tooltip.style.transform = 'translateY(-50%)';
                                break;
                        }

                        tooltip.style.visibility = 'visible';
                    }, 500);

                    

                });

                element.addEventListener('mouseleave', function (e) {
                    console.log('mouseleave');
                    tooltip.timer = setTimeout(() => {
                        tooltip.style.visibility = 'hidden';
                    }, 1500);
                });

            });
        }

        // Attach tooltips to all elements with the class 'tooltip-target'
        createTooltip('.tooltip-target');
    </script>
</body>

</html>